You are implementing Phase 1 – Feature F1-9 for the AlphaLens app.

Feature ID: F1-9
Title: Real Data Providers + Caching + UI Display (NO Persistence)

IMPORTANT SCOPE NOTE (READ CAREFULLY):
- F1-9 is responsible ONLY for:
  - Fetching real data from providers
  - Caching data (Layer-1 cache only)
  - Displaying real fetched data in the UI
- Durable persistence to AWS (S3 / DynamoDB / RDS) is EXPLICITLY OUT OF SCOPE for F1-9.
- Long-term persistence for LLM explainability, auditability, and history replay will be implemented later in:
  → Feature F1-4 (LLM Explainability Layer)
- HOWEVER, you MUST design data structures in F1-9 so they can be persisted later without refactor.

--------------------------------------------------
Goal (F1-9):
--------------------------------------------------
Integrate real external data providers and expose their data in the UI:
1) Market / Technical data → Polygon
2) Fundamentals data → Financial Modeling Prep (FMP)
3) News data → NewsAPI

Add a TTL-based caching layer to reduce API cost.
Display real fetched data (with freshness + provider attribution) in the UI.

--------------------------------------------------
Governance Rules (MANDATORY):
--------------------------------------------------
- Implement ONLY F1-9. Do not start any other feature.
- Update docs/feature-index.md and docs/prd.index.md:
  - Set F1-9 → In Progress at start
  - Set F1-9 → In Review when implementation is complete
  - Set F1-9 → Complete ONLY after tests pass
- Follow Base PRD and Phase-1 PRD strictly.

--------------------------------------------------
Architecture Constraints:
--------------------------------------------------
- Follow Clean Architecture (Ports & Adapters).
- Providers MUST be behind interfaces:
  - MarketDataProvider
  - FundamentalsProvider
  - NewsProvider
- LLMs MUST NOT make decisions (summarization only; not used in F1-9 scoring).
- Secrets MUST NOT be committed.

--------------------------------------------------
Data Providers (Required):
--------------------------------------------------
Market Data:
- Provider: Polygon
- Purpose: prices + inputs for technical indicators

Fundamentals:
- Provider: Financial Modeling Prep (FMP)
- Scope (MVP):
  - Company profile (sector, industry, market cap)
  - Key metrics / ratios (PE, ROE, Debt/Equity, etc.)
  - At least one financial statement endpoint

News:
- Provider: NewsAPI
- Scope:
  - Latest news for a ticker
  - Limit results returned to UI to MAX 5 articles
  - Include title, source, published_at, and URL

--------------------------------------------------
Caching (Layer-1 Only):
--------------------------------------------------
- Cache provider responses ONLY (not recommendation results).
- Cache MUST be shared across users.
- Cache TTLs configurable via env vars.
- Cache must store:
  - fetched_at
  - expires_at (or ttl)
  - provider name
- Cache must be disable-able via env var.
- Acceptable cache backends:
  - sqlite OR filesystem (pick one)

IMPORTANT:
- This cache is NOT the explainability persistence layer.
- Cached data may be evicted and MUST NOT be treated as durable history.

--------------------------------------------------
UI Requirements (MANDATORY):
--------------------------------------------------
Add UI sections (or panels) that show REAL fetched data:

1) Technical Data Panel
- Latest price
- Key indicators used by AlphaLens (RSI, MACD, SMA/EMA, etc.)
- “As of” timestamp
- Provider label: Polygon

2) Fundamentals Panel
- Company profile: sector, industry, market cap
- 5–10 key metrics / ratios
- Period (annual / quarterly)
- fetched_at timestamp
- Provider label: FMP

3) News + Sentiment Panel
- Up to 5 news articles
- Each article shows:
  - title
  - source
  - published time
  - clickable link (URL)
- Sentiment:
  - If sentiment already exists, reuse it
  - Else implement a SIMPLE deterministic sentiment label
- Show fetched_at timestamp
- Provider label: NewsAPI

UI MUST:
- Gracefully handle missing data
- Show freshness (“fetched X minutes ago”)
- Never crash if a provider fails

--------------------------------------------------
Environment Variables (EXACT NAMES):
--------------------------------------------------
FMP_API_KEY=...
POLYGON_API_KEY=...
NEWS_API_KEY=...
NEWS_API_BASE_URL=https://newsapi.org/v2
NEWS_API_COUNTRY=us
NEWS_API_PAGE_SIZE=8

Caching / HTTP:
PROVIDER_CACHE_ENABLED=true|false
PROVIDER_CACHE_BACKEND=sqlite|filesystem
PROVIDER_CACHE_DIR=.cache/alphalens
PROVIDER_CACHE_DB_PATH=.cache/alphalens/cache.sqlite
MARKET_CACHE_TTL_SECONDS=60
FUNDAMENTALS_CACHE_TTL_SECONDS=86400
NEWS_CACHE_TTL_SECONDS=300
HTTP_TIMEOUT_SECONDS=10
HTTP_MAX_RETRIES=2
HTTP_RETRY_BACKOFF_SECONDS=0.5

--------------------------------------------------
Persistence & Explainability (IMPORTANT NOTE):
--------------------------------------------------
- F1-9 MUST NOT write to AWS S3, DynamoDB, or any database.
- F1-9 MUST define a structured in-memory object (e.g., EvaluationData / EvidencePacket)
  that contains:
  - technical inputs
  - fundamentals snapshot
  - news list + sentiment
  - provider metadata
  - timestamps
- This object will be persisted later by Feature F1-4.
- Do NOT generate LLM explanations in F1-9.

--------------------------------------------------
Deliverables:
--------------------------------------------------
1) Provider adapters (Polygon, FMP, NewsAPI)
2) Cache implementation + tests
3) Config loader + validation
4) UI displaying real data + freshness
5) .env.example (placeholders only)
6) Unit tests with mocked providers
7) Feature docs:
   - spec.md
   - tasks.md
   - tests.md
   - acceptance.md
   - rollback.md

--------------------------------------------------
Acceptance Criteria:
--------------------------------------------------
- App runs end-to-end using real providers
- Missing env vars fail fast with clear error
- Caching demonstrably reduces API calls
- UI shows real data from all 3 providers
- No AWS persistence implemented
- All tests pass
- Feature index updated correctly

Now implement Feature F1-9 ONLY.